@using Library.Models.Book;
@using Library.Models.DTO;

@model DTOModel;

@* 
    Ideas:
    Buscador de book
    Disable Button en Edit View
 *@

@{
    ViewData["Title"] = "Book Management";
    ViewData["Objeto"] = "Book";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="col-9 mt-3">
    <h2 
        class="text-red-2" 
        title="General title of the page"
    >
        @ViewData["Title"]
    </h2>
</div>
<div class="col-12 border-top-red-3 p-3">
    <div class="row">
        <div class="col-2">
            <a 
                href="/Book/NewClient" 
                value="register"
                title="Create a new customer button"
                class="btn btn-success redondeado text-white"
                style="width: max-content;"
            >
                Add new Book
            </a>
        </div>
    </div>
    <br />
    @if (Model.BookList != null)
    {
        @if (Model.BookList.Count() >= 1)
        {
            <table 
                id="table" 
                class="table table-striped table-bordered"
                style="width:100%" 
                title="List of all books"
            >
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Copies</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (BookModel book in Model.BookList)
                    {
                        <tr>
                            <td>@book.Book_Id</td>
                            <td>@book.Title</td>
                            <td>@book.Author.Name</td>                            
                            <td>@book.Copies</td>
                            <td>$@book.Price</td>
                            <td style="width:25%;">
                                <a 
                                    href="/Book/NewBook?Book_Id=@book.Book_Id"
                                    class="btn btn-warning text-white btn-gral"
                                    title="Button to edit customer data"
                                >
                                    Edit
                                </a>
                                <a 
                                    href="/Book/ConsultBook?Book_Id=@book.Book_Id"
                                    class="btn btn-primary text-white btn-gral"
                                    title="Button to check customer data"
                                >
                                    Consult
                                </a>
                                <a 
                                    href="/Book/DisableBook?Book_Id=@book.Book_Id"
                                    class="btn btn-danger text-white btn-gral"
                                    title="Button to delete all customer data and records "
                                >
                                    Disable
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Copies</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </tfoot>
            </table>
        }
        else
        {
            <table 
                id="table" 
                class="table table-striped table-bordered"
                style="width:100%" 
                title="List of all books">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Copies</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
                <tfoot>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Copies</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </tfoot>
            </table>
        }
    }
</div>
<br />
<br />

<script>
    $(document).ready(function () {
        $('#table').DataTable();
    });
</script>
